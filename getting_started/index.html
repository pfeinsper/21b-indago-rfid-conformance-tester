<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Getting started - Insper: Open-source Conformance Tester for Tags EPC-GEN2 UHF RFID</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting started";
    var mkdocs_page_input_path = "getting_started.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/C.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Insper: Open-source Conformance Tester for Tags EPC-GEN2 UHF RFID</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Getting started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#tools">Tools</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cloning">Cloning</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#testing-running">Testing / Running</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#modelsim-guide">ModelSim guide</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#hardware-guide">Hardware guide</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#hardware-guide-handshake">Hardware guide (handshake)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-to-collaborate">How to collaborate</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../hardware/">Hardware</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../IP_core_interface/">IP core interface</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../firmware/">Firmware</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../tests/">Testing the components</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="" href="https://pfeinsper.github.io/21b-indago-rfid-conformance-tester/doxygen/annotated.html">Doxygen</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../conclusion_%26_team/">Conclusion</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Insper: Open-source Conformance Tester for Tags EPC-GEN2 UHF RFID</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h1>
<h2 id="tools">Tools<a class="headerlink" href="#tools" title="Permanent link">&para;</a></h2>
<p>To be able to use the Conformance Tester for Tags EPC-GEN2 UHF RFID, you'll need the following tools:</p>
<ul>
<li><strong>Hardware:</strong><ul>
<li>DE10-Standard + accessories</li>
<li>jumpers</li>
</ul>
</li>
<li><strong>Software:</strong><ul>
<li>Quartus Prime Lite Edition 18.1</li>
<li>Cyclone V device support</li>
<li>ModelSim-Intel FPGA Edition</li>
<li>git</li>
</ul>
</li>
</ul>
<p>You can find the Quartus and ModelSim software downloads <a href="https://fpgasoftware.intel.com/18.1/?edition=lite">here</a>. The user manual for the DE-10 Standard board can be found <a href="https://github.com/Insper/DE10-Standard-v.1.3.0-SystemCD/blob/master/Manual/DE10-Standard_User_manual.pdf">here</a>.</p>
<h2 id="cloning">Cloning<a class="headerlink" href="#cloning" title="Permanent link">&para;</a></h2>
<p>To clone the project, run the following command on your preferred terminal.</p>
<p><code>git clone &lt;https://github.com/pfeinsper/21b-indago-rfid-conformance-tester.git&gt;</code></p>
<p>The repository is now cloned, and you can start testing/running the project.</p>
<h2 id="testing-running">Testing / Running<a class="headerlink" href="#testing-running" title="Permanent link">&para;</a></h2>
<p>First, launch Quartus Prime. After launching, click on <code>File</code> ➡️ <code>Open Project</code>. A window will pop up, and you need to choose the <code>rfid-conformance-tester.qpf</code> file, located in the <code>fpga</code> folder of the repository. The video below shows how to do so.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/X-rHq0sN2uE" title="How to open Quartus project" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Once the project has been opened, you can work on it; however, the steps to run the project depend on whether you want to simulate using ModelSim or whether you want to launch on the DE-10 Standard board.</p>
<h3 id="modelsim-guide">ModelSim guide<a class="headerlink" href="#modelsim-guide" title="Permanent link">&para;</a></h3>
<p>To test and simulate the project on ModelSim, the first step is to check the files present in the project. Click on <code>Project</code> ➡️ <code>Add/Remove Files in Project</code>. It should look like the picture below.</p>
<p><img alt="Project files for ModelSim simulation" src="files_modelsim.png" />
<em>ModelSim project files</em></p>
<p>After checking the files, go to <code>Project Navigator</code> on the left panel, click on the dropdown menu that says <code>Hierarchy</code>, then click on <code>Files</code>. After that, right-click on the <code>RTL/rfid.vhd</code> file, and click on the option that says <code>Set as Top-Level Entity</code>. Now you can click on the blue play button next to the stop button to start the compilation.</p>
<p>Once the project is compiled, click on <code>Tools</code> ➡️ <code>Platform Designer</code>. A new window should open. Find the <code>RFID_NIOS.qsys</code> file, and open it.</p>
<p><img alt="Platform Designer" src="platform_designer.png" style="width: 80%; display: block; margin: auto" />
<em>Platform Designer qsys file window prompt</em></p>
<p>Once you've opened the file, it should show the project's design. On this window, click on <code>Generate</code> ➡️ <code>Generate Testbench System...</code>.</p>
<p><img alt="Generating testbench" src="generate_tb.png" />
<em>Platform Designer schematic with peripherals</em></p>
<p>Make sure the settings are as follows, and click on <code>Generate</code> on the bottom.</p>
<p><img alt="Testbench settings" src="generate_tb2.png" style="width: 90%; display: block; margin: auto" />
<em>Generate testbench window prompt with settings</em></p>
<p>Next, you wanna open up the <code>Nios® II Software Build Tools for Eclipse</code>. If it's your first time opening this tool, the Eclipse window will ask you to choose a workspace. Now the Eclipse window should be open with a blank workspace like the one below.</p>
<p><img alt="Eclipse workspace" src="eclipse_blank.png" />
<em>Eclipse workspace</em></p>
<p>The next step is to import our projects into Eclipse. Go to <code>File</code> ➡️ <code>Import</code>, and it should show a window like the one below. Click on <code>Nios II Software Build Tools Project</code> ➡️ <code>Import Nios II Software Build Tools Project</code>, then click <code>Next</code>.</p>
<p><img alt="Importing project" src="import_project.png" style="width: 80%; display: block; margin: auto" />
<em>Import project window prompt</em></p>
<p>Now you need to click on the <code>Browse</code> button and look for the project. The projects are located at <code>21b-indago-rfid-conformance-tester/fpga/software</code>. First, import the <code>rfid_test</code> project, then click <code>Finish</code>, and make sure that the <code>Clean project when importing</code> box is checked. Do the same steps for the <code>rfid_test_bsp</code> project.</p>
<p><img alt="Importing project" src="import_project2.png" style="width: 80%; display: block; margin: auto" />
<em>Import project second window prompt</em></p>
<p>After both projects have been imported, right-click on <code>rfid_test_bsp</code> ➡️ <code>BSP Editor</code>. It will open a window like the one below. Make sure that the options are all the same.</p>
<p><img alt="BSP editor" src="bsp_modelsim.png" style="width: 90%; display: block; margin: auto" />
<em>BSP Editor settings for ModelSim</em></p>
<p>You also need to check the <code>enable_small_driver</code> box on the <code>Drivers</code> tab.</p>
<p>After checking the settings, click on the <code>Generate</code> button. Once you generated the BSP, open up the <code>config.h</code> file in the <code>helpers</code> folder of the <code>rfid_test</code> project, and make sure that the value of the <code>MASK_LOOPBACK</code> is set to <code>1</code>. After that, save the <code>config.h</code> file, right-click the <code>rfid_test</code> project and click on <code>Build Project</code>.</p>
<p>If you had any errors, try cleaning both projects, generating the BSP and rebuilding the project.</p>
<p>Once the build is complete, go to <code>Run</code> ➡️ <code>Run configurations</code>. It should open up a new window. Right click on <code>Nios II Modelsim</code>, and click on <code>New</code>. A new ModelSim run configuration has been created, and you can click on <code>Run</code> to simulate. The image below shows the configuration settings.</p>
<p><img alt="ModelSim Configuration" src="modelsim_config.png" />
<em>ModelSim run configuration window prompt</em></p>
<p>You can also watch the video below, which shows the step-by-step process.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/hdLwmes4Abs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3 id="hardware-guide">Hardware guide<a class="headerlink" href="#hardware-guide" title="Permanent link">&para;</a></h3>
<p><strong>Important:</strong> If you want to launch the project on the DE-10 Standard board, a Quartus License is required.</p>
<p>To launch the project on the DE-10 Standard board, the first step is to check the files present in the project. Click on <code>Project</code> ➡️ <code>Add/Remove Files in Project</code>. It should look like the picture below.</p>
<p><img alt="Project files for hardware implementation" src="files_hw.png" />
<em>Hardware implementation project files</em></p>
<p>If you are missing the <code>RFID_NIOS.qip</code> file, you can generate it using the <code>Platform Designer</code>. You can follow the same instructions used on the ModelSim guide to open the <code>Platform Designer</code> and open the project's design.</p>
<p>Once the design is open, click on <code>Generate</code> ➡️ <code>Generate HDL...</code>. The settings should match the ones present in the image below. After that, just click on the <code>Generate</code> button, and it should generate the IP variation file.</p>
<p><img alt="Generating HDL" src="generate_hdl.png" style="width: 80%; display: block; margin: auto" />
<em>Generate HDL window prompt with settings</em></p>
<p>After checking the files, go to <code>Project Navigator</code> on the left panel, click on the dropdown menu that says <code>Hierarchy</code>, then click on <code>Files</code>. After that, right-click on the <code>RTL/rfid_nios_HW.vhd</code> file, and click on the option that says <code>Set as Top-Level Entity</code>. Now you can click on the blue play button next to the stop button to start the compilation.</p>
<p>After compiling, go to <code>Tools</code> ➡️ <code>Programmmer</code> to program the board. Be sure that the board is plugged in before opening.</p>
<p><img alt="Programmer window" src="programmer.png" />
<em>Quartus Programmer window</em></p>
<p>If your board is not showing up on the <code>Hardware</code> menu on top, click on <code>Hardware Setup</code>, then double click on your board in the menu. After selecting your board, close this window.</p>
<p><img alt="Hardware Setup" src="hw_setup.png" style="width: 80%; display: block; margin: auto" />
<em>Hardware Setup window prompt</em></p>
<p>Once your board is shown in the <code>Hardware</code> menu, click on the <code>Auto Detect</code> button on the left menu, and select the corresponding device name for your board (it is engraved on the chip, shown in the image below).</p>
<p><img alt="Device name" src="device_chip.png" style="width: 60%; display: block; margin: auto" />
<em>Cyclone V device chip (image obtained <a href="https://br.mouser.com/images/marketingid/2012/img/135185855.png?v=050521.0810">here</a>)</em></p>
<p>After selecting the corresponding device name, the program may show two chips: one named <code>SOCVHPS</code> and the other with your device. Double-click on the <code>File</code> tab next to the name of your device, and look for the <code>rfid-conformance-tester.sof</code> file for the compiled project, located on the <code>21b-indago-rfid-conformance-tester/fpga/output_files</code> folder.</p>
<p>Once you selected the file, check the <code>Program/Configure</code> box next to your device as is shown in the image below, then click on <code>Start</code> to program the board. Once it's finished, you can close the <code>Programmer</code> window.</p>
<p><img alt="Programmer with board" src="select_board.png" />
<em>Quartus Programmer window with board detected</em></p>
<p>After programming the board, get a female/female jumper, plug one end on pin 6 of the GPIO header and the other end on pin 7 of the GPIO header, as shown in the image below.</p>
<p><img alt="GPIO schematic" src="gpio.png" style="height: 40%; display: block; margin: auto" />
<em>GPIO schematic showing jumper connections (image obtained <a href="http://modernhackers.com/wp-content/uploads/2019/12/SDRAM-Board-GPIO-Direction-DE10-Standard-DE1-SoC-ArrowSoCKit.png">here</a>)</em></p>
<p>Once the jumpers are connected, open up the <code>Nios® II Software Build Tools for Eclipse</code>. You can follow the same steps shown in the ModelSim guide on how to do so.</p>
<p>After both projects have been imported, right-click on <code>rfid_test_bsp</code> ➡️ <code>BSP Editor</code>.Make sure that the options are the same as the ones present in the image below (they are <strong>not</strong> the same settings from the ModelSim guide).</p>
<p><img alt="BSP Editor" src="bsp_hw.png" style="width: 90%; display: block; margin: auto" />
<em>BSP Editor settings for hardware</em></p>
<p>The <code>enable_small_driver</code> box on the <code>Drivers</code> tab needs to be kept checked.</p>
<p>After checking the settings, click on the <code>Generate</code> button on the editor. Once you generated the BSP, open up the <code>config.h</code> file in the <code>helpers</code> folder of the <code>rfid_test</code> project. This time, the value of the <code>MASK_LOOPBACK</code> needs to be set to <code>0</code>. After that, save the <code>config.h</code> file, right-click the <code>rfid_test</code> project and click on <code>Build Project</code>.</p>
<p>If you had any errors, try cleaning both projects, generating the BSP and rebuilding the project.</p>
<p>Once the build is complete, go to <code>Run</code> ➡️ <code>Run configurations</code>. It should open up a new window. Right click on <code>Nios II Hardware</code>, and click on <code>New</code>. Once the configuration has been created, go to the <code>Target Connection</code> tab, and check if the settings are the same as the one shown in the image below. Once you checked the settings, you can click on <code>Run</code> to launch.</p>
<p><img alt="Hardware Configuration" src="hw_config.png" />
<em>Hardware run configuration window prompt</em></p>
<p>You can also watch the video below, which shows the step-by-step process.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2RS8Qlrdf1I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3 id="hardware-guide-handshake">Hardware guide (handshake)<a class="headerlink" href="#hardware-guide-handshake" title="Permanent link">&para;</a></h3>
<p>You can also run a handshake version of the project using two DE-10 Standard boards. To do so, follow the same steps shown on the hardware guide until you reach the <code>rfid_test</code> project build. Before building the project, you need to find the <code>tag.c</code> and  <code>reader.c</code> files, located in the <code>fpga</code> folder.</p>
<p>Choose one board to act as the tag, and one board to act as the reader; after that, replace the code present in the <code>main.c</code> with the corresponding code (one board will have the <code>tag.c</code> code and the other will have the <code>reader.c</code> code).</p>
<p>After overwriting the code, build the project on each Nios workspace (you can open up two workspaces on the same PC, but it is a little trickier to do so; hence, it is recommended that you do this on two PCs). Once the projects are built, use female/female jumpers to connect the board pins as shown in the image below.</p>
<p><img alt="GPIO schematic" src="gpio_x2.png" style="height: 80%; display: block; margin: auto" />
<em>GPIO schematic with jumper connections (image obtained <a href="http://modernhackers.com/wp-content/uploads/2019/12/SDRAM-Board-GPIO-Direction-DE10-Standard-DE1-SoC-ArrowSoCKit.png">here</a>)</em></p>
<p>After properly connecting the pins, you can use the same run configurations created on the hardware guide to run the project.</p>
<p><strong>Important:</strong> First, launch the tag configuration, and wait for the <code>Nios II Console</code> to print the <code>waiting for query</code> message. After that, you can launch the reader configuration.</p>
<p>You can also watch the video below, which shows the step-by-step process.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1bx67orrCxc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h2 id="how-to-collaborate">How to collaborate<a class="headerlink" href="#how-to-collaborate" title="Permanent link">&para;</a></h2>
<p>Firstly, you should create a fork of the original repository to work on. You can learn how to do so <a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo">here</a>.
After creating your own fork, you can open a pull request to this repository. The instructions on how to do it can be found <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork">here</a>. After making your pull request, it will be reviewed by one of the team members, and if everything's ok, they will approve it. If there are problems with your pull request, the reviewer will inform you of them, and you can make the adjustments necessary.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../hardware/" class="btn btn-neutral float-right" title="Hardware">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2021 / Prof. Rafael Corsi / rafael.corsi@insper.edu.br</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../hardware/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
